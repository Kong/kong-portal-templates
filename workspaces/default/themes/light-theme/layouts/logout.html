{% layout = "layouts/_base.html" %}

{-main-}
<script>
var baseApiUrl = "{*portal():urls():api()()*}";

window.addEventListener("load", function () {
  var redirectTo = Kong.Auth.getRedirectTo('{{portal():redirect("logout")()}}')

  Kong.Auth.logout({
    baseUrl: baseApiUrl,
    type: '{{portal():config("auth")()}}'
  }).then(() => {
    window.location.href = redirectTo
  }).catch((e) => {
    // TODO handle actual error
    window.location.href = redirectTo
  })
})
</script>
{-main-}
